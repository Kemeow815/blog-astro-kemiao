function _array_like_to_array(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_without_holes(arr){if(Array.isArray(arr))return _array_like_to_array(arr)}function _assert_this_initialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _call_super(_this,derived,args){derived=_get_prototype_of(derived);return _possible_constructor_return(_this,_is_native_reflect_construct()?Reflect.construct(derived,args||[],_get_prototype_of(_this).constructor):derived.apply(_this,args))}function _class_call_check(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _define_property(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _get_prototype_of(o){_get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _get_prototype_of(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_set_prototype_of(subClass,superClass)}function _instanceof(left,right){if(right!=null&&typeof Symbol!=="undefined"&&right[Symbol.hasInstance]){return!!right[Symbol.hasInstance](left)}else{return left instanceof right}}function _iterable_to_array(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}function _possible_constructor_return(self,call){if(call&&(_type_of(call)==="object"||typeof call==="function")){return call}return _assert_this_initialized(self)}function _set_prototype_of(o,p){_set_prototype_of=Object.setPrototypeOf||function setPrototypeOf(o,p){o.__proto__=p;return o};return _set_prototype_of(o,p)}function _to_consumable_array(arr){return _array_without_holes(arr)||_iterable_to_array(arr)||_unsupported_iterable_to_array(arr)||_non_iterable_spread()}function _type_of(obj){"@swc/helpers - typeof";return obj&&typeof Symbol!=="undefined"&&obj.constructor===Symbol?"symbol":typeof obj}function _unsupported_iterable_to_array(o,minLen){if(!o)return;if(typeof o==="string")return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}function _is_native_reflect_construct(){try{var result=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(_){}return(_is_native_reflect_construct=function(){return!!result})()}(function(factory){typeof define==="function"&&define.amd?define(factory):factory()})(function(){"use strict";function isArray(value){return!Array.isArray?getTag(value)==="[object Array]":Array.isArray(value)}function baseToString(value){if(typeof value=="string"){return value}var result=value+"";return result=="0"&&1/value==-Infinity?"-0":result}function toString(value){return value==null?"":baseToString(value)}function isString(value){return typeof value==="string"}function isNumber(value){return typeof value==="number"}function isBoolean(value){return value===true||value===false||isObjectLike(value)&&getTag(value)=="[object Boolean]"}function isObject(value){return(typeof value==="undefined"?"undefined":_type_of(value))==="object"}function isObjectLike(value){return isObject(value)&&value!==null}function isDefined(value){return value!==undefined&&value!==null}function isBlank(value){return!value.trim().length}function getTag(value){return value==null?value===undefined?"[object Undefined]":"[object Null]":Object.prototype.toString.call(value)}var INCORRECT_INDEX_TYPE="Incorrect 'index' type";var LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY=function(key){return"Invalid value for key ".concat(key)};var PATTERN_LENGTH_TOO_LARGE=function(max){return"Pattern length exceeds max of ".concat(max,".")};var MISSING_KEY_PROPERTY=function(name){return"Missing ".concat(name," property in key")};var INVALID_KEY_WEIGHT_VALUE=function(key){return"Property 'weight' in key '".concat(key,"' must be a positive integer")};var hasOwn=Object.prototype.hasOwnProperty;var KeyStore=/*#__PURE__*/function(){function KeyStore(keys){var _this=this;_class_call_check(this,KeyStore);this._keys=[];this._keyMap={};var totalWeight=0;keys.forEach(function(key){var obj=createKey(key);_this._keys.push(obj);_this._keyMap[obj.id]=obj;totalWeight+=obj.weight});this._keys.forEach(function(key){key.weight/=totalWeight})}_create_class(KeyStore,[{key:"get",value:function get(keyId){return this._keyMap[keyId]}},{key:"keys",value:function keys(){return this._keys}},{key:"toJSON",value:function toJSON(){return JSON.stringify(this._keys)}}]);return KeyStore}();function createKey(key){var path=null;var id=null;var src=null;var weight=1;var getFn=null;if(isString(key)||isArray(key)){src=key;path=createKeyPath(key);id=createKeyId(key)}else{if(!hasOwn.call(key,"name")){throw new Error(MISSING_KEY_PROPERTY("name"))}var name=key.name;src=name;if(hasOwn.call(key,"weight")){weight=key.weight;if(weight<=0){throw new Error(INVALID_KEY_WEIGHT_VALUE(name))}}path=createKeyPath(name);id=createKeyId(name);getFn=key.getFn}return{path:path,id:id,weight:weight,src:src,getFn:getFn}}function createKeyPath(key){return isArray(key)?key:key.split(".")}function createKeyId(key){return isArray(key)?key.join("."):key}function get(obj,path){var list=[];var arr=false;var deepGet=function(obj,path,index){if(!isDefined(obj)){return}if(!path[index]){list.push(obj)}else{var key=path[index];var value=obj[key];if(!isDefined(value)){return}if(index===path.length-1&&(isString(value)||isNumber(value)||isBoolean(value))){list.push(toString(value))}else if(isArray(value)){arr=true;for(var i=0,len=value.length;i<len;i+=1){deepGet(value[i],path,index+1)}}else if(path.length){deepGet(value,path,index+1)}}};deepGet(obj,isString(path)?path.split("."):path,0);return arr?list:list[0]}var MatchOptions={includeMatches:false,findAllMatches:false,minMatchCharLength:1};var BasicOptions={isCaseSensitive:false,ignoreDiacritics:false,includeScore:false,keys:[],shouldSort:true,sortFn:function(a,b){return a.score===b.score?a.idx<b.idx?-1:1:a.score<b.score?-1:1}};var FuzzyOptions={location:0,threshold:.6,distance:100};var AdvancedOptions={useExtendedSearch:false,getFn:get,ignoreLocation:false,ignoreFieldNorm:false,fieldNormWeight:1};var Config=_object_spread({},BasicOptions,MatchOptions,FuzzyOptions,AdvancedOptions);var SPACE=/[^ ]+/g;function norm(){var weight=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,mantissa=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;var cache=new Map;var m=Math.pow(10,mantissa);return{get:function get(value){var numTokens=value.match(SPACE).length;if(cache.has(numTokens)){return cache.get(numTokens)}var norm=1/Math.pow(numTokens,.5*weight);var n=parseFloat(Math.round(norm*m)/m);cache.set(numTokens,n);return n},clear:function clear(){cache.clear()}}}var FuseIndex=/*#__PURE__*/function(){function FuseIndex(){var _ref=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_ref_getFn=_ref.getFn,getFn=_ref_getFn===void 0?Config.getFn:_ref_getFn,_ref_fieldNormWeight=_ref.fieldNormWeight,fieldNormWeight=_ref_fieldNormWeight===void 0?Config.fieldNormWeight:_ref_fieldNormWeight;_class_call_check(this,FuseIndex);this.norm=norm(fieldNormWeight,3);this.getFn=getFn;this.isCreated=false;this.setIndexRecords()}_create_class(FuseIndex,[{key:"setSources",value:function setSources(){var docs=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.docs=docs}},{key:"setIndexRecords",value:function setIndexRecords(){var records=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.records=records}},{key:"setKeys",value:function setKeys(){var _this=this;var keys=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.keys=keys;this._keysMap={};keys.forEach(function(key,idx){_this._keysMap[key.id]=idx})}},{key:"create",value:function create(){var _this=this;if(this.isCreated||!this.docs.length){return}this.isCreated=true;if(isString(this.docs[0])){this.docs.forEach(function(doc,docIndex){_this._addString(doc,docIndex)})}else{this.docs.forEach(function(doc,docIndex){_this._addObject(doc,docIndex)})}this.norm.clear()}},{key:"add",value:function add(doc){var idx=this.size();if(isString(doc)){this._addString(doc,idx)}else{this._addObject(doc,idx)}}},{key:"removeAt",value:function removeAt(idx){this.records.splice(idx,1);for(var i=idx,len=this.size();i<len;i+=1){this.records[i].i-=1}}},{key:"getValueForItemAtKeyId",value:function getValueForItemAtKeyId(item,keyId){return item[this._keysMap[keyId]]}},{key:"size",value:function size(){return this.records.length}},{key:"_addString",value:function _addString(doc,docIndex){if(!isDefined(doc)||isBlank(doc)){return}var record={v:doc,i:docIndex,n:this.norm.get(doc)};this.records.push(record)}},{key:"_addObject",value:function _addObject(doc,docIndex){var _this=this;var record={i:docIndex,$:{}};this.keys.forEach(function(key,keyIndex){var value=key.getFn?key.getFn(doc):_this.getFn(doc,key.path);if(!isDefined(value)){return}if(isArray(value)){var subRecords=[];var stack=[{nestedArrIndex:-1,value:value}];while(stack.length){var _stack_pop=stack.pop(),nestedArrIndex=_stack_pop.nestedArrIndex,value1=_stack_pop.value;if(!isDefined(value1)){continue}if(isString(value1)&&!isBlank(value1)){var subRecord={v:value1,i:nestedArrIndex,n:_this.norm.get(value1)};subRecords.push(subRecord)}else if(isArray(value1)){value1.forEach(function(item,k){stack.push({nestedArrIndex:k,value:item})})}else;}record.$[keyIndex]=subRecords}else if(isString(value)&&!isBlank(value)){var subRecord1={v:value,n:_this.norm.get(value)};record.$[keyIndex]=subRecord1}});this.records.push(record)}},{key:"toJSON",value:function toJSON(){return{keys:this.keys,records:this.records}}}]);return FuseIndex}();function createIndex(keys,docs){var _ref=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_ref_getFn=_ref.getFn,getFn=_ref_getFn===void 0?Config.getFn:_ref_getFn,_ref_fieldNormWeight=_ref.fieldNormWeight,fieldNormWeight=_ref_fieldNormWeight===void 0?Config.fieldNormWeight:_ref_fieldNormWeight;var myIndex=new FuseIndex({getFn:getFn,fieldNormWeight:fieldNormWeight});myIndex.setKeys(keys.map(createKey));myIndex.setSources(docs);myIndex.create();return myIndex}function parseIndex(data){var _ref=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_ref_getFn=_ref.getFn,getFn=_ref_getFn===void 0?Config.getFn:_ref_getFn,_ref_fieldNormWeight=_ref.fieldNormWeight,fieldNormWeight=_ref_fieldNormWeight===void 0?Config.fieldNormWeight:_ref_fieldNormWeight;var keys=data.keys,records=data.records;var myIndex=new FuseIndex({getFn:getFn,fieldNormWeight:fieldNormWeight});myIndex.setKeys(keys);myIndex.setIndexRecords(records);return myIndex}function computeScore$1(pattern){var _ref=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_ref_errors=_ref.errors,errors=_ref_errors===void 0?0:_ref_errors,_ref_currentLocation=_ref.currentLocation,currentLocation=_ref_currentLocation===void 0?0:_ref_currentLocation,_ref_expectedLocation=_ref.expectedLocation,expectedLocation=_ref_expectedLocation===void 0?0:_ref_expectedLocation,_ref_distance=_ref.distance,distance=_ref_distance===void 0?Config.distance:_ref_distance,_ref_ignoreLocation=_ref.ignoreLocation,ignoreLocation=_ref_ignoreLocation===void 0?Config.ignoreLocation:_ref_ignoreLocation;var accuracy=errors/pattern.length;if(ignoreLocation){return accuracy}var proximity=Math.abs(expectedLocation-currentLocation);if(!distance){return proximity?1:accuracy}return accuracy+proximity/distance}function convertMaskToIndices(){var matchmask=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],minMatchCharLength=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Config.minMatchCharLength;var indices=[];var start=-1;var end=-1;var i=0;for(var len=matchmask.length;i<len;i+=1){var match=matchmask[i];if(match&&start===-1){start=i}else if(!match&&start!==-1){end=i-1;if(end-start+1>=minMatchCharLength){indices.push([start,end])}start=-1}}if(matchmask[i-1]&&i-start>=minMatchCharLength){indices.push([start,i-1])}return indices}var MAX_BITS=32;function search(text,pattern,patternAlphabet){var _ref=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},_ref_location=_ref.location,location=_ref_location===void 0?Config.location:_ref_location,_ref_distance=_ref.distance,distance=_ref_distance===void 0?Config.distance:_ref_distance,_ref_threshold=_ref.threshold,threshold=_ref_threshold===void 0?Config.threshold:_ref_threshold,_ref_findAllMatches=_ref.findAllMatches,findAllMatches=_ref_findAllMatches===void 0?Config.findAllMatches:_ref_findAllMatches,_ref_minMatchCharLength=_ref.minMatchCharLength,minMatchCharLength=_ref_minMatchCharLength===void 0?Config.minMatchCharLength:_ref_minMatchCharLength,_ref_includeMatches=_ref.includeMatches,includeMatches=_ref_includeMatches===void 0?Config.includeMatches:_ref_includeMatches,_ref_ignoreLocation=_ref.ignoreLocation,ignoreLocation=_ref_ignoreLocation===void 0?Config.ignoreLocation:_ref_ignoreLocation;if(pattern.length>MAX_BITS){throw new Error(PATTERN_LENGTH_TOO_LARGE(MAX_BITS))}var patternLen=pattern.length;var textLen=text.length;var expectedLocation=Math.max(0,Math.min(location,textLen));var currentThreshold=threshold;var bestLocation=expectedLocation;var computeMatches=minMatchCharLength>1||includeMatches;var matchMask=computeMatches?Array(textLen):[];var index;while((index=text.indexOf(pattern,bestLocation))>-1){var score=computeScore$1(pattern,{currentLocation:index,expectedLocation:expectedLocation,distance:distance,ignoreLocation:ignoreLocation});currentThreshold=Math.min(score,currentThreshold);bestLocation=index+patternLen;if(computeMatches){var i=0;while(i<patternLen){matchMask[index+i]=1;i+=1}}}bestLocation=-1;var lastBitArr=[];var finalScore=1;var binMax=patternLen+textLen;var mask=1<<patternLen-1;for(var i1=0;i1<patternLen;i1+=1){var binMin=0;var binMid=binMax;while(binMin<binMid){var score1=computeScore$1(pattern,{errors:i1,currentLocation:expectedLocation+binMid,expectedLocation:expectedLocation,distance:distance,ignoreLocation:ignoreLocation});if(score1<=currentThreshold){binMin=binMid}else{binMax=binMid}binMid=Math.floor((binMax-binMin)/2+binMin)}binMax=binMid;var start=Math.max(1,expectedLocation-binMid+1);var finish=findAllMatches?textLen:Math.min(expectedLocation+binMid,textLen)+patternLen;var bitArr=Array(finish+2);bitArr[finish+1]=(1<<i1)-1;for(var j=finish;j>=start;j-=1){var currentLocation=j-1;var charMatch=patternAlphabet[text.charAt(currentLocation)];if(computeMatches){matchMask[currentLocation]=+!!charMatch}bitArr[j]=(bitArr[j+1]<<1|1)&charMatch;if(i1){bitArr[j]|=(lastBitArr[j+1]|lastBitArr[j])<<1|1|lastBitArr[j+1]}if(bitArr[j]&mask){finalScore=computeScore$1(pattern,{errors:i1,currentLocation:currentLocation,expectedLocation:expectedLocation,distance:distance,ignoreLocation:ignoreLocation});if(finalScore<=currentThreshold){currentThreshold=finalScore;bestLocation=currentLocation;if(bestLocation<=expectedLocation){break}start=Math.max(1,2*expectedLocation-bestLocation)}}}var score2=computeScore$1(pattern,{errors:i1+1,currentLocation:expectedLocation,expectedLocation:expectedLocation,distance:distance,ignoreLocation:ignoreLocation});if(score2>currentThreshold){break}lastBitArr=bitArr}var result={isMatch:bestLocation>=0,score:Math.max(.001,finalScore)};if(computeMatches){var indices=convertMaskToIndices(matchMask,minMatchCharLength);if(!indices.length){result.isMatch=false}else if(includeMatches){result.indices=indices}}return result}function createPatternAlphabet(pattern){var mask={};for(var i=0,len=pattern.length;i<len;i+=1){var char=pattern.charAt(i);mask[char]=(mask[char]||0)|1<<len-i-1}return mask}var stripDiacritics=String.prototype.normalize?function(str){return str.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")}:function(str){return str};var BitapSearch=/*#__PURE__*/function(){function BitapSearch(pattern){var _this=this;var _ref=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_ref_location=_ref.location,location=_ref_location===void 0?Config.location:_ref_location,_ref_threshold=_ref.threshold,threshold=_ref_threshold===void 0?Config.threshold:_ref_threshold,_ref_distance=_ref.distance,distance=_ref_distance===void 0?Config.distance:_ref_distance,_ref_includeMatches=_ref.includeMatches,includeMatches=_ref_includeMatches===void 0?Config.includeMatches:_ref_includeMatches,_ref_findAllMatches=_ref.findAllMatches,findAllMatches=_ref_findAllMatches===void 0?Config.findAllMatches:_ref_findAllMatches,_ref_minMatchCharLength=_ref.minMatchCharLength,minMatchCharLength=_ref_minMatchCharLength===void 0?Config.minMatchCharLength:_ref_minMatchCharLength,_ref_isCaseSensitive=_ref.isCaseSensitive,isCaseSensitive=_ref_isCaseSensitive===void 0?Config.isCaseSensitive:_ref_isCaseSensitive,_ref_ignoreDiacritics=_ref.ignoreDiacritics,ignoreDiacritics=_ref_ignoreDiacritics===void 0?Config.ignoreDiacritics:_ref_ignoreDiacritics,_ref_ignoreLocation=_ref.ignoreLocation,ignoreLocation=_ref_ignoreLocation===void 0?Config.ignoreLocation:_ref_ignoreLocation;_class_call_check(this,BitapSearch);this.options={location:location,threshold:threshold,distance:distance,includeMatches:includeMatches,findAllMatches:findAllMatches,minMatchCharLength:minMatchCharLength,isCaseSensitive:isCaseSensitive,ignoreDiacritics:ignoreDiacritics,ignoreLocation:ignoreLocation};pattern=isCaseSensitive?pattern:pattern.toLowerCase();pattern=ignoreDiacritics?stripDiacritics(pattern):pattern;this.pattern=pattern;this.chunks=[];if(!this.pattern.length){return}var addChunk=function(pattern,startIndex){_this.chunks.push({pattern:pattern,alphabet:createPatternAlphabet(pattern),startIndex:startIndex})};var len=this.pattern.length;if(len>MAX_BITS){var i=0;var remainder=len%MAX_BITS;var end=len-remainder;while(i<end){addChunk(this.pattern.substr(i,MAX_BITS),i);i+=MAX_BITS}if(remainder){var startIndex=len-MAX_BITS;addChunk(this.pattern.substr(startIndex),startIndex)}}else{addChunk(this.pattern,0)}}_create_class(BitapSearch,[{key:"searchIn",value:function searchIn(text){var _this_options=this.options,isCaseSensitive=_this_options.isCaseSensitive,ignoreDiacritics=_this_options.ignoreDiacritics,includeMatches=_this_options.includeMatches;text=isCaseSensitive?text:text.toLowerCase();text=ignoreDiacritics?stripDiacritics(text):text;if(this.pattern===text){var result={isMatch:true,score:0};if(includeMatches){result.indices=[[0,text.length-1]]}return result}var _this_options1=this.options,location=_this_options1.location,distance=_this_options1.distance,threshold=_this_options1.threshold,findAllMatches=_this_options1.findAllMatches,minMatchCharLength=_this_options1.minMatchCharLength,ignoreLocation=_this_options1.ignoreLocation;var allIndices=[];var totalScore=0;var hasMatches=false;this.chunks.forEach(function(param){var pattern=param.pattern,alphabet=param.alphabet,startIndex=param.startIndex;var _search=search(text,pattern,alphabet,{location:location+startIndex,distance:distance,threshold:threshold,findAllMatches:findAllMatches,minMatchCharLength:minMatchCharLength,includeMatches:includeMatches,ignoreLocation:ignoreLocation}),isMatch=_search.isMatch,score=_search.score,indices=_search.indices;if(isMatch){hasMatches=true}totalScore+=score;if(isMatch&&indices){allIndices=_to_consumable_array(allIndices).concat(_to_consumable_array(indices))}});var result1={isMatch:hasMatches,score:hasMatches?totalScore/this.chunks.length:1};if(hasMatches&&includeMatches){result1.indices=allIndices}return result1}}]);return BitapSearch}();var BaseMatch=/*#__PURE__*/function(){function BaseMatch(pattern){_class_call_check(this,BaseMatch);this.pattern=pattern}_create_class(BaseMatch,[{key:"search",value:function search(){}}],[{key:"isMultiMatch",value:function isMultiMatch(pattern){return getMatch(pattern,this.multiRegex)}},{key:"isSingleMatch",value:function isSingleMatch(pattern){return getMatch(pattern,this.singleRegex)}}]);return BaseMatch}();function getMatch(pattern,exp){var matches=pattern.match(exp);return matches?matches[1]:null}var ExactMatch=/*#__PURE__*/function(BaseMatch){_inherits(ExactMatch,BaseMatch);function ExactMatch(pattern){_class_call_check(this,ExactMatch);return _call_super(this,ExactMatch,[pattern])}_create_class(ExactMatch,[{key:"search",value:function search(text){var isMatch=text===this.pattern;return{isMatch:isMatch,score:isMatch?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function get(){return"exact"}},{key:"multiRegex",get:function get(){return/^="(.*)"$/}},{key:"singleRegex",get:function get(){return/^=(.*)$/}}]);return ExactMatch}(BaseMatch);var InverseExactMatch=/*#__PURE__*/function(BaseMatch){_inherits(InverseExactMatch,BaseMatch);function InverseExactMatch(pattern){_class_call_check(this,InverseExactMatch);return _call_super(this,InverseExactMatch,[pattern])}_create_class(InverseExactMatch,[{key:"search",value:function search(text){var index=text.indexOf(this.pattern);var isMatch=index===-1;return{isMatch:isMatch,score:isMatch?0:1,indices:[0,text.length-1]}}}],[{key:"type",get:function get(){return"inverse-exact"}},{key:"multiRegex",get:function get(){return/^!"(.*)"$/}},{key:"singleRegex",get:function get(){return/^!(.*)$/}}]);return InverseExactMatch}(BaseMatch);var PrefixExactMatch=/*#__PURE__*/function(BaseMatch){_inherits(PrefixExactMatch,BaseMatch);function PrefixExactMatch(pattern){_class_call_check(this,PrefixExactMatch);return _call_super(this,PrefixExactMatch,[pattern])}_create_class(PrefixExactMatch,[{key:"search",value:function search(text){var isMatch=text.startsWith(this.pattern);return{isMatch:isMatch,score:isMatch?0:1,indices:[0,this.pattern.length-1]}}}],[{key:"type",get:function get(){return"prefix-exact"}},{key:"multiRegex",get:function get(){return/^\^"(.*)"$/}},{key:"singleRegex",get:function get(){return/^\^(.*)$/}}]);return PrefixExactMatch}(BaseMatch);var InversePrefixExactMatch=/*#__PURE__*/function(BaseMatch){_inherits(InversePrefixExactMatch,BaseMatch);function InversePrefixExactMatch(pattern){_class_call_check(this,InversePrefixExactMatch);return _call_super(this,InversePrefixExactMatch,[pattern])}_create_class(InversePrefixExactMatch,[{key:"search",value:function search(text){var isMatch=!text.startsWith(this.pattern);return{isMatch:isMatch,score:isMatch?0:1,indices:[0,text.length-1]}}}],[{key:"type",get:function get(){return"inverse-prefix-exact"}},{key:"multiRegex",get:function get(){return/^!\^"(.*)"$/}},{key:"singleRegex",get:function get(){return/^!\^(.*)$/}}]);return InversePrefixExactMatch}(BaseMatch);var SuffixExactMatch=/*#__PURE__*/function(BaseMatch){_inherits(SuffixExactMatch,BaseMatch);function SuffixExactMatch(pattern){_class_call_check(this,SuffixExactMatch);return _call_super(this,SuffixExactMatch,[pattern])}_create_class(SuffixExactMatch,[{key:"search",value:function search(text){var isMatch=text.endsWith(this.pattern);return{isMatch:isMatch,score:isMatch?0:1,indices:[text.length-this.pattern.length,text.length-1]}}}],[{key:"type",get:function get(){return"suffix-exact"}},{key:"multiRegex",get:function get(){return/^"(.*)"\$$/}},{key:"singleRegex",get:function get(){return/^(.*)\$$/}}]);return SuffixExactMatch}(BaseMatch);var InverseSuffixExactMatch=/*#__PURE__*/function(BaseMatch){_inherits(InverseSuffixExactMatch,BaseMatch);function InverseSuffixExactMatch(pattern){_class_call_check(this,InverseSuffixExactMatch);return _call_super(this,InverseSuffixExactMatch,[pattern])}_create_class(InverseSuffixExactMatch,[{key:"search",value:function search(text){var isMatch=!text.endsWith(this.pattern);return{isMatch:isMatch,score:isMatch?0:1,indices:[0,text.length-1]}}}],[{key:"type",get:function get(){return"inverse-suffix-exact"}},{key:"multiRegex",get:function get(){return/^!"(.*)"\$$/}},{key:"singleRegex",get:function get(){return/^!(.*)\$$/}}]);return InverseSuffixExactMatch}(BaseMatch);var FuzzyMatch=/*#__PURE__*/function(BaseMatch){_inherits(FuzzyMatch,BaseMatch);function FuzzyMatch(pattern){var _ref=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_ref_location=_ref.location,location=_ref_location===void 0?Config.location:_ref_location,_ref_threshold=_ref.threshold,threshold=_ref_threshold===void 0?Config.threshold:_ref_threshold,_ref_distance=_ref.distance,distance=_ref_distance===void 0?Config.distance:_ref_distance,_ref_includeMatches=_ref.includeMatches,includeMatches=_ref_includeMatches===void 0?Config.includeMatches:_ref_includeMatches,_ref_findAllMatches=_ref.findAllMatches,findAllMatches=_ref_findAllMatches===void 0?Config.findAllMatches:_ref_findAllMatches,_ref_minMatchCharLength=_ref.minMatchCharLength,minMatchCharLength=_ref_minMatchCharLength===void 0?Config.minMatchCharLength:_ref_minMatchCharLength,_ref_isCaseSensitive=_ref.isCaseSensitive,isCaseSensitive=_ref_isCaseSensitive===void 0?Config.isCaseSensitive:_ref_isCaseSensitive,_ref_ignoreDiacritics=_ref.ignoreDiacritics,ignoreDiacritics=_ref_ignoreDiacritics===void 0?Config.ignoreDiacritics:_ref_ignoreDiacritics,_ref_ignoreLocation=_ref.ignoreLocation,ignoreLocation=_ref_ignoreLocation===void 0?Config.ignoreLocation:_ref_ignoreLocation;_class_call_check(this,FuzzyMatch);var _this;_this=_call_super(this,FuzzyMatch,[pattern]);_this._bitapSearch=new BitapSearch(pattern,{location:location,threshold:threshold,distance:distance,includeMatches:includeMatches,findAllMatches:findAllMatches,minMatchCharLength:minMatchCharLength,isCaseSensitive:isCaseSensitive,ignoreDiacritics:ignoreDiacritics,ignoreLocation:ignoreLocation});return _this}_create_class(FuzzyMatch,[{key:"search",value:function search(text){return this._bitapSearch.searchIn(text)}}],[{key:"type",get:function get(){return"fuzzy"}},{key:"multiRegex",get:function get(){return/^"(.*)"$/}},{key:"singleRegex",get:function get(){return/^(.*)$/}}]);return FuzzyMatch}(BaseMatch);var IncludeMatch=/*#__PURE__*/function(BaseMatch){_inherits(IncludeMatch,BaseMatch);function IncludeMatch(pattern){_class_call_check(this,IncludeMatch);return _call_super(this,IncludeMatch,[pattern])}_create_class(IncludeMatch,[{key:"search",value:function search(text){var location=0;var index;var indices=[];var patternLen=this.pattern.length;while((index=text.indexOf(this.pattern,location))>-1){location=index+patternLen;indices.push([index,location-1])}var isMatch=!!indices.length;return{isMatch:isMatch,score:isMatch?0:1,indices:indices}}}],[{key:"type",get:function get(){return"include"}},{key:"multiRegex",get:function get(){return/^'"(.*)"$/}},{key:"singleRegex",get:function get(){return/^'(.*)$/}}]);return IncludeMatch}(BaseMatch);var searchers=[ExactMatch,IncludeMatch,PrefixExactMatch,InversePrefixExactMatch,InverseSuffixExactMatch,SuffixExactMatch,InverseExactMatch,FuzzyMatch];var searchersLen=searchers.length;var SPACE_RE=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;var OR_TOKEN="|";function parseQuery(pattern){var options=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return pattern.split(OR_TOKEN).map(function(item){var query=item.trim().split(SPACE_RE).filter(function(item){return item&&!!item.trim()});var results=[];for(var i=0,len=query.length;i<len;i+=1){var queryItem=query[i];var found=false;var idx=-1;while(!found&&++idx<searchersLen){var searcher=searchers[idx];var token=searcher.isMultiMatch(queryItem);if(token){results.push(new searcher(token,options));found=true}}if(found){continue}idx=-1;while(++idx<searchersLen){var searcher1=searchers[idx];var token1=searcher1.isSingleMatch(queryItem);if(token1){results.push(new searcher1(token1,options));break}}}return results})}var MultiMatchSet=new Set([FuzzyMatch.type,IncludeMatch.type]);var ExtendedSearch=/*#__PURE__*/function(){function ExtendedSearch(pattern){var _ref=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_ref_isCaseSensitive=_ref.isCaseSensitive,isCaseSensitive=_ref_isCaseSensitive===void 0?Config.isCaseSensitive:_ref_isCaseSensitive,_ref_ignoreDiacritics=_ref.ignoreDiacritics,ignoreDiacritics=_ref_ignoreDiacritics===void 0?Config.ignoreDiacritics:_ref_ignoreDiacritics,_ref_includeMatches=_ref.includeMatches,includeMatches=_ref_includeMatches===void 0?Config.includeMatches:_ref_includeMatches,_ref_minMatchCharLength=_ref.minMatchCharLength,minMatchCharLength=_ref_minMatchCharLength===void 0?Config.minMatchCharLength:_ref_minMatchCharLength,_ref_ignoreLocation=_ref.ignoreLocation,ignoreLocation=_ref_ignoreLocation===void 0?Config.ignoreLocation:_ref_ignoreLocation,_ref_findAllMatches=_ref.findAllMatches,findAllMatches=_ref_findAllMatches===void 0?Config.findAllMatches:_ref_findAllMatches,_ref_location=_ref.location,location=_ref_location===void 0?Config.location:_ref_location,_ref_threshold=_ref.threshold,threshold=_ref_threshold===void 0?Config.threshold:_ref_threshold,_ref_distance=_ref.distance,distance=_ref_distance===void 0?Config.distance:_ref_distance;_class_call_check(this,ExtendedSearch);this.query=null;this.options={isCaseSensitive:isCaseSensitive,ignoreDiacritics:ignoreDiacritics,includeMatches:includeMatches,minMatchCharLength:minMatchCharLength,findAllMatches:findAllMatches,ignoreLocation:ignoreLocation,location:location,threshold:threshold,distance:distance};pattern=isCaseSensitive?pattern:pattern.toLowerCase();pattern=ignoreDiacritics?stripDiacritics(pattern):pattern;this.pattern=pattern;this.query=parseQuery(this.pattern,this.options)}_create_class(ExtendedSearch,[{key:"searchIn",value:function searchIn(text){var query=this.query;if(!query){return{isMatch:false,score:1}}var _this_options=this.options,includeMatches=_this_options.includeMatches,isCaseSensitive=_this_options.isCaseSensitive,ignoreDiacritics=_this_options.ignoreDiacritics;text=isCaseSensitive?text:text.toLowerCase();text=ignoreDiacritics?stripDiacritics(text):text;var numMatches=0;var allIndices=[];var totalScore=0;for(var i=0,qLen=query.length;i<qLen;i+=1){var searchers=query[i];allIndices.length=0;numMatches=0;for(var j=0,pLen=searchers.length;j<pLen;j+=1){var searcher=searchers[j];var _searcher_search=searcher.search(text),isMatch=_searcher_search.isMatch,indices=_searcher_search.indices,score=_searcher_search.score;if(isMatch){numMatches+=1;totalScore+=score;if(includeMatches){var type=searcher.constructor.type;if(MultiMatchSet.has(type)){allIndices=_to_consumable_array(allIndices).concat(_to_consumable_array(indices))}else{allIndices.push(indices)}}}else{totalScore=0;numMatches=0;allIndices.length=0;break}}if(numMatches){var result={isMatch:true,score:totalScore/numMatches};if(includeMatches){result.indices=allIndices}return result}}return{isMatch:false,score:1}}}],[{key:"condition",value:function condition(_,options){return options.useExtendedSearch}}]);return ExtendedSearch}();var registeredSearchers=[];function register(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}var _registeredSearchers;(_registeredSearchers=registeredSearchers).push.apply(_registeredSearchers,_to_consumable_array(args))}function createSearcher(pattern,options){for(var i=0,len=registeredSearchers.length;i<len;i+=1){var searcherClass=registeredSearchers[i];if(searcherClass.condition(pattern,options)){return new searcherClass(pattern,options)}}return new BitapSearch(pattern,options)}var LogicalOperator={AND:"$and",OR:"$or"};var KeyType={PATH:"$path",PATTERN:"$val"};var isExpression=function(query){return!!(query[LogicalOperator.AND]||query[LogicalOperator.OR])};var isPath=function(query){return!!query[KeyType.PATH]};var isLeaf=function(query){return!isArray(query)&&isObject(query)&&!isExpression(query)};var convertToExplicit=function(query){return _define_property({},LogicalOperator.AND,Object.keys(query).map(function(key){return _define_property({},key,query[key])}))};function parse(query,options){var _ref=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_ref_auto=_ref.auto,auto=_ref_auto===void 0?true:_ref_auto;var next=function(query){var keys=Object.keys(query);var isQueryPath=isPath(query);if(!isQueryPath&&keys.length>1&&!isExpression(query)){return next(convertToExplicit(query))}if(isLeaf(query)){var key=isQueryPath?query[KeyType.PATH]:keys[0];var pattern=isQueryPath?query[KeyType.PATTERN]:query[key];if(!isString(pattern)){throw new Error(LOGICAL_SEARCH_INVALID_QUERY_FOR_KEY(key))}var obj={keyId:createKeyId(key),pattern:pattern};if(auto){obj.searcher=createSearcher(pattern,options)}return obj}var node={children:[],operator:keys[0]};keys.forEach(function(key){var value=query[key];if(isArray(value)){value.forEach(function(item){node.children.push(next(item))})}});return node};if(!isExpression(query)){query=convertToExplicit(query)}return next(query)}function computeScore(results,param){var _param_ignoreFieldNorm=param.ignoreFieldNorm,ignoreFieldNorm=_param_ignoreFieldNorm===void 0?Config.ignoreFieldNorm:_param_ignoreFieldNorm;results.forEach(function(result){var totalScore=1;result.matches.forEach(function(param){var key=param.key,norm=param.norm,score=param.score;var weight=key?key.weight:null;totalScore*=Math.pow(score===0&&weight?Number.EPSILON:score,(weight||1)*(ignoreFieldNorm?1:norm))});result.score=totalScore})}function transformMatches(result,data){var matches=result.matches;data.matches=[];if(!isDefined(matches)){return}matches.forEach(function(match){if(!isDefined(match.indices)||!match.indices.length){return}var indices=match.indices,value=match.value;var obj={indices:indices,value:value};if(match.key){obj.key=match.key.src}if(match.idx>-1){obj.refIndex=match.idx}data.matches.push(obj)})}function transformScore(result,data){data.score=result.score}function format(results,docs){var _ref=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_ref_includeMatches=_ref.includeMatches,includeMatches=_ref_includeMatches===void 0?Config.includeMatches:_ref_includeMatches,_ref_includeScore=_ref.includeScore,includeScore=_ref_includeScore===void 0?Config.includeScore:_ref_includeScore;var transformers=[];if(includeMatches)transformers.push(transformMatches);if(includeScore)transformers.push(transformScore);return results.map(function(result){var idx=result.idx;var data={item:docs[idx],refIndex:idx};if(transformers.length){transformers.forEach(function(transformer){transformer(result,data)})}return data})}var Fuse=/*#__PURE__*/function(){function Fuse(docs){var options=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},index=arguments.length>2?arguments[2]:void 0;_class_call_check(this,Fuse);this.options=_object_spread({},Config,options);if(this.options.useExtendedSearch&&false);this._keyStore=new KeyStore(this.options.keys);this.setCollection(docs,index)}_create_class(Fuse,[{key:"setCollection",value:function setCollection(docs,index){this._docs=docs;if(index&&!_instanceof(index,FuseIndex)){throw new Error(INCORRECT_INDEX_TYPE)}this._myIndex=index||createIndex(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}},{key:"add",value:function add(doc){if(!isDefined(doc)){return}this._docs.push(doc);this._myIndex.add(doc)}},{key:"remove",value:function remove(){var predicate=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){return false};var results=[];for(var i=0,len=this._docs.length;i<len;i+=1){var doc=this._docs[i];if(predicate(doc,i)){this.removeAt(i);i-=1;len-=1;results.push(doc)}}return results}},{key:"removeAt",value:function removeAt(idx){this._docs.splice(idx,1);this._myIndex.removeAt(idx)}},{key:"getIndex",value:function getIndex(){return this._myIndex}},{key:"search",value:function search(query){var _ref=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_ref_limit=_ref.limit,limit=_ref_limit===void 0?-1:_ref_limit;var _this_options=this.options,includeMatches=_this_options.includeMatches,includeScore=_this_options.includeScore,shouldSort=_this_options.shouldSort,sortFn=_this_options.sortFn,ignoreFieldNorm=_this_options.ignoreFieldNorm;var results=isString(query)?isString(this._docs[0])?this._searchStringList(query):this._searchObjectList(query):this._searchLogical(query);computeScore(results,{ignoreFieldNorm:ignoreFieldNorm});if(shouldSort){results.sort(sortFn)}if(isNumber(limit)&&limit>-1){results=results.slice(0,limit)}return format(results,this._docs,{includeMatches:includeMatches,includeScore:includeScore})}},{key:"_searchStringList",value:function _searchStringList(query){var searcher=createSearcher(query,this.options);var records=this._myIndex.records;var results=[];records.forEach(function(param){var text=param.v,idx=param.i,norm=param.n;if(!isDefined(text)){return}var _searcher_searchIn=searcher.searchIn(text),isMatch=_searcher_searchIn.isMatch,score=_searcher_searchIn.score,indices=_searcher_searchIn.indices;if(isMatch){results.push({item:text,idx:idx,matches:[{score:score,value:text,norm:norm,indices:indices}]})}});return results}},{key:"_searchLogical",value:function _searchLogical(query){var _this=this;var expression=parse(query,this.options);var evaluate=function(node,item,idx){if(!node.children){var keyId=node.keyId,searcher=node.searcher;var matches=_this._findMatches({key:_this._keyStore.get(keyId),value:_this._myIndex.getValueForItemAtKeyId(item,keyId),searcher:searcher});if(matches&&matches.length){return[{idx:idx,item:item,matches:matches}]}return[]}var res=[];for(var i=0,len=node.children.length;i<len;i+=1){var child=node.children[i];var result=evaluate(child,item,idx);if(result.length){var _res;(_res=res).push.apply(_res,_to_consumable_array(result))}else if(node.operator===LogicalOperator.AND){return[]}}return res};var records=this._myIndex.records;var resultMap={};var results=[];records.forEach(function(param){var item=param.$,idx=param.i;if(isDefined(item)){var expResults=evaluate(expression,item,idx);if(expResults.length){if(!resultMap[idx]){resultMap[idx]={idx:idx,item:item,matches:[]};results.push(resultMap[idx])}expResults.forEach(function(param){var matches=param.matches;var _resultMap_idx_matches;(_resultMap_idx_matches=resultMap[idx].matches).push.apply(_resultMap_idx_matches,_to_consumable_array(matches))})}}});return results}},{key:"_searchObjectList",value:function _searchObjectList(query){var _this=this;var searcher=createSearcher(query,this.options);var _this__myIndex=this._myIndex,keys=_this__myIndex.keys,records=_this__myIndex.records;var results=[];records.forEach(function(param){var item=param.$,idx=param.i;if(!isDefined(item)){return}var matches=[];keys.forEach(function(key,keyIndex){var _matches;(_matches=matches).push.apply(_matches,_to_consumable_array(_this._findMatches({key:key,value:item[keyIndex],searcher:searcher})))});if(matches.length){results.push({idx:idx,item:item,matches:matches})}});return results}},{key:"_findMatches",value:function _findMatches(param){var key=param.key,value=param.value,searcher=param.searcher;if(!isDefined(value)){return[]}var matches=[];if(isArray(value)){value.forEach(function(param){var text=param.v,idx=param.i,norm=param.n;if(!isDefined(text)){return}var _searcher_searchIn=searcher.searchIn(text),isMatch=_searcher_searchIn.isMatch,score=_searcher_searchIn.score,indices=_searcher_searchIn.indices;if(isMatch){matches.push({score:score,key:key,value:text,idx:idx,norm:norm,indices:indices})}})}else{var text=value.v,norm=value.n;var _searcher_searchIn=searcher.searchIn(text),isMatch=_searcher_searchIn.isMatch,score=_searcher_searchIn.score,indices=_searcher_searchIn.indices;if(isMatch){matches.push({score:score,key:key,value:text,norm:norm,indices:indices})}}return matches}}]);return Fuse}();Fuse.version="7.1.0";Fuse.createIndex=createIndex;Fuse.parseIndex=parseIndex;Fuse.config=Config;{Fuse.parseQuery=parse}{register(ExtendedSearch)}function asyncGeneratorStep$4(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _async_to_generator$4(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep$4(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep$4(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _class_call_check$3(instance,Constructor){if(!_instanceof(instance,Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties$3(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class$3(Constructor,protoProps,staticProps){if(protoProps)_defineProperties$3(Constructor.prototype,protoProps);return Constructor}function _define_property$2(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _ts_generator$4(thisArg,body){var f,y,t,g,_={label:0,sent:function sent(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),"throw":verb(1),"return":verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}}var SoSimpleRef=function(){function SoSimpleRef(val){_class_call_check$3(this,SoSimpleRef);_define_property$2(this,"_val",void 0);_define_property$2(this,"_watchers",[]);this._val=val}_create_class$3(SoSimpleRef,[{key:"value",get:function get(){return this._val},set:function set(val){this._val=val;var _iteratorNormalCompletion=true,_didIteratorError=false,_iteratorError=undefined;try{for(var _iterator=this._watchers[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var watcher=_step.value;watcher.fn(val);watcher.time--}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}this._watchers=this._watchers.filter(function(w){return w.time>0})}},{key:"watch",value:function watch(fn){var time=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.POSITIVE_INFINITY;this._watchers.push({fn:fn,time:time})}},{key:"watchOnce",value:function watchOnce(fn){this._watchers.push({fn:fn,time:1})}},{key:"nextVal",value:function nextVal(){var _this=this;return _async_to_generator$4(function(){return _ts_generator$4(this,function(_state){return[2,new Promise(function(res){_this.watchOnce(function(){return res(_this.value)})})]})})()}},{key:"_checkin",value:function _checkin(vals){var _iteratorNormalCompletion=true,_didIteratorError=false,_iteratorError=undefined;try{for(var _iterator=vals[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var val=_step.value;if(val==null&&this._val==null)return true;if(this._val===val)return true}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return false}},{key:"unitl",value:function unitl(){for(var _len=arguments.length,vals=new Array(_len),_key=0;_key<_len;_key++){vals[_key]=arguments[_key]}var _this=this;return _async_to_generator$4(function(){return _ts_generator$4(this,function(_state){switch(_state.label){case 0:if(!!_this._checkin(vals))return[3,2];return[4,_this.nextVal()];case 1:_state.sent();return[3,0];case 2:return[2,_this.value]}})})()}},{key:"unitlNot",value:function unitlNot(){for(var _len=arguments.length,vals=new Array(_len),_key=0;_key<_len;_key++){vals[_key]=arguments[_key]}var _this=this;return _async_to_generator$4(function(){return _ts_generator$4(this,function(_state){switch(_state.label){case 0:if(!_this._checkin(vals))return[3,2];return[4,_this.nextVal()];case 1:_state.sent();return[3,0];case 2:return[2,_this.value]}})})()}}]);return SoSimpleRef}();var SiteStatic={get base(){var _document_getElementById;var _document_getElementById_dataset_url;return(_document_getElementById_dataset_url=(_document_getElementById=document.getElementById("site_data_static"))===null||_document_getElementById===void 0?void 0:_document_getElementById.dataset.url)!==null&&_document_getElementById_dataset_url!==void 0?_document_getElementById_dataset_url:"/"},get root(){return new URL(this.base,window.location.origin)},url_for:function url_for(url){if(url[0]==="/"){url=url.slice(1)}return this.root+url}};function asyncGeneratorStep$3(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _async_to_generator$3(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep$3(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep$3(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _class_call_check$2(instance,Constructor){if(!_instanceof(instance,Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties$2(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class$2(Constructor,protoProps,staticProps){if(protoProps)_defineProperties$2(Constructor.prototype,protoProps);return Constructor}function _define_property$1(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _ts_generator$3(thisArg,body){var f,y,t,g,_={label:0,sent:function sent(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),"throw":verb(1),"return":verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}}var SoSimpleDynamicResource=function(){function SoSimpleDynamicResource(src){var _this=this;var transform=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function transform(x){return x};_class_call_check$2(this,SoSimpleDynamicResource);_define_property$1(this,"loaded",new SoSimpleRef(false));_define_property$1(this,"__data",null);var promise=typeof src==="string"?fetch(SiteStatic.url_for(src)).then(function(body){return body.json()}):src;promise.then(function(res){_this.loaded.value=true;_this.__data=transform(res)})}_create_class$2(SoSimpleDynamicResource,[{key:"data",value:function data(){var _this=this;return _async_to_generator$3(function(){return _ts_generator$3(this,function(_state){switch(_state.label){case 0:return[4,_this.loaded.unitl(true)];case 1:_state.sent();return[2,_this.__data]}})})()}}]);return SoSimpleDynamicResource}();function _array_like_to_array$2(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes$1(arr){if(Array.isArray(arr))return arr}function _array_without_holes$1(arr){if(Array.isArray(arr))return _array_like_to_array$2(arr)}function _instanceof1(left,right){if(right!=null&&typeof Symbol!=="undefined"&&right[Symbol.hasInstance]){return!!right[Symbol.hasInstance](left)}else{return _instanceof(left,right)}}function _iterable_to_array$1(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _iterable_to_array_limit$1(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _non_iterable_rest$1(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _non_iterable_spread$1(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array$1(arr,i){return _array_with_holes$1(arr)||_iterable_to_array_limit$1(arr,i)||_unsupported_iterable_to_array$2(arr,i)||_non_iterable_rest$1()}function _to_array(arr){return _array_with_holes$1(arr)||_iterable_to_array$1(arr)||_unsupported_iterable_to_array$2(arr)||_non_iterable_rest$1()}function _to_consumable_array$1(arr){return _array_without_holes$1(arr)||_iterable_to_array$1(arr)||_unsupported_iterable_to_array$2(arr)||_non_iterable_spread$1()}function _unsupported_iterable_to_array$2(o,minLen){if(!o)return;if(typeof o==="string")return _array_like_to_array$2(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array$2(o,minLen)}function h(ident,attrs){for(var _len=arguments.length,content=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){content[_key-2]=arguments[_key]}var _elem_classList;var _ident_split=_to_array(ident.split(".")),tagName=_ident_split[0],classes=_ident_split.slice(1);if(!tagName)tagName="div";var elem=document.createElement(tagName);(_elem_classList=elem.classList).add.apply(_elem_classList,_to_consumable_array$1(classes));if(attrs!=null){var _iteratorNormalCompletion=true,_didIteratorError=false,_iteratorError=undefined;try{for(var _iterator=Object.entries(attrs)[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _step_value=_sliced_to_array$1(_step.value,2),key=_step_value[0],val=_step_value[1];if(key==="class"&&attrs.class){var _elem_classList1;(_elem_classList1=elem.classList).add.apply(_elem_classList1,_to_consumable_array$1(attrs.class.split(" ")))}else if(key.startsWith("on")){elem.addEventListener(key.slice(2),val)}else{elem.setAttribute(key,val)}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}function addContent(c){if(typeof c==="string"){elem.innerHTML+=c}else if(_instanceof1(c,Element)){elem.appendChild(c)}}var _iteratorNormalCompletion1=true,_didIteratorError1=false,_iteratorError1=undefined;try{for(var _iterator1=content.flat()[Symbol.iterator](),_step1;!(_iteratorNormalCompletion1=(_step1=_iterator1.next()).done);_iteratorNormalCompletion1=true){var c=_step1.value;addContent(c)}}catch(err){_didIteratorError1=true;_iteratorError1=err}finally{try{if(!_iteratorNormalCompletion1&&_iterator1.return!=null){_iterator1.return()}}finally{if(_didIteratorError1){throw _iteratorError1}}}return elem}function loadCSS(url){document.head.append(h("link",{rel:"stylesheet",type:"text/css",href:url}))}function asyncGeneratorStep$2(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _async_to_generator$2(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep$2(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep$2(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _ts_generator$2(thisArg,body){var f,y,t,g,_={label:0,sent:function sent(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),"throw":verb(1),"return":verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}}function loadScript(config){return _loadScript.apply(this,arguments)}function _loadScript(){_loadScript=_async_to_generator$2(function(config){var runner;return _ts_generator$2(this,function(_state){switch(_state.label){case 0:if(!config.url)return[3,2];return[4,fetch(config.url).then(function(r){return r.text()})];case 1:config.script=_state.sent();_state.label=2;case 2:if(!config.script){return[2]}runner=new Function(config.script);runner();return[2]}})});return _loadScript.apply(this,arguments)}function escapeHTML(str){return String(str).replace(/[&<>'"]/g,function(tag){return({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"})[tag]||tag})}function nextTick(fn){setTimeout(function(){fn()},10)}var Utils=Object.freeze({__proto__:null,escapeHTML:escapeHTML,h:h,loadCSS:loadCSS,loadScript:loadScript,nextTick:nextTick});function _class_call_check$1(instance,Constructor){if(!_instanceof(instance,Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties$1(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class$1(Constructor,protoProps,staticProps){if(protoProps)_defineProperties$1(Constructor.prototype,protoProps);return Constructor}var Component=function(){function Component(){var _this=this;_class_call_check$1(this,Component);document.addEventListener("DOMContentLoaded",function(){_this.init()},{once:true})}_create_class$1(Component,[{key:"init",value:function init(){}}]);return Component}();function asyncGeneratorStep$1(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _async_to_generator$1(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep$1(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep$1(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _ts_generator$1(thisArg,body){var f,y,t,g,_={label:0,sent:function sent(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),"throw":verb(1),"return":verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}}function routeTo(link){return _routeTo.apply(this,arguments)}function _routeTo(){_routeTo=_async_to_generator$1(function(link){return _ts_generator$1(this,function(_state){window.location.href=link.startsWith("/")?SiteStatic.url_for(link):link;return[2]})});return _routeTo.apply(this,arguments)}var router={routeTo:routeTo};function _array_like_to_array$1(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _assert_this_initialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}function _call_super1(_this,derived,args){derived=_get_prototype_of(derived);return _possible_constructor_return(_this,_is_native_reflect_construct()?Reflect.construct(derived,[],_get_prototype_of(_this).constructor):derived.apply(_this,args))}function _class_call_check1(instance,Constructor){if(!_instanceof(instance,Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class1(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);return Constructor}function _define_property1(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _get_prototype_of(o){_get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _get_prototype_of(o)}function _inherits1(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_set_prototype_of(subClass,superClass)}function _iterable_to_array_limit(arr,i){var _i=arr==null?null:typeof Symbol!=="undefined"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i==null)return;var _arr=[];var _n=true;var _d=false;var _s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _non_iterable_rest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _object_spread1(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==="function"){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))}ownKeys.forEach(function(key){_define_property1(target,key,source[key])})}return target}function _possible_constructor_return(self,call){if(call&&(_type_of1(call)==="object"||typeof call==="function")){return call}return _assert_this_initialized(self)}function _set_prototype_of(o,p){_set_prototype_of=Object.setPrototypeOf||function setPrototypeOf(o,p){o.__proto__=p;return o};return _set_prototype_of(o,p)}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array$1(arr,i)||_non_iterable_rest()}function _type_of1(obj){"@swc/helpers - typeof";return obj&&typeof Symbol!=="undefined"&&obj.constructor===Symbol?"symbol":typeof obj}function _unsupported_iterable_to_array$1(o,minLen){if(!o)return;if(typeof o==="string")return _array_like_to_array$1(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array$1(o,minLen)}function _is_native_reflect_construct(){try{var result=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(_){}return(_is_native_reflect_construct=function _is_native_reflect_construct(){return!!result})()}function _ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function sent(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),"throw":verb(1),"return":verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}}var SEARCH_RESULT_LIMIT=10;var SEARCHABLE=["posts","pages","tags","categories"];var SoSimpleSearch=function(Component){_inherits1(SoSimpleSearch,Component);function SoSimpleSearch(config){_class_call_check1(this,SoSimpleSearch);var _this;_this=_call_super1(this,SoSimpleSearch),_define_property1(_this,"searchData",void 0),_define_property1(_this,"config",{}),_define_property1(_this,"showing",false),_define_property1(_this,"fuses",{}),_define_property1(_this,"fuse_ok",new SoSimpleRef(false));_this.searchData=new SoSimpleDynamicResource("content.json");_this.config=config;return _this}_create_class1(SoSimpleSearch,[{key:"mainEl",get:function get(){return document.querySelector(".ins-search")}},{key:"inputEl",get:function get(){var _this_mainEl;return(_this_mainEl=this.mainEl)===null||_this_mainEl===void 0?void 0:_this_mainEl.querySelector(".ins-search-input")}},{key:"wrapperEl",get:function get(){var _this_mainEl;return(_this_mainEl=this.mainEl)===null||_this_mainEl===void 0?void 0:_this_mainEl.querySelector(".ins-section-wrapper")}},{key:"containerEl",get:function get(){var _this_mainEl;return(_this_mainEl=this.mainEl)===null||_this_mainEl===void 0?void 0:_this_mainEl.querySelector(".ins-section-container")}},{key:"init",value:function init(){var _this=this;this.buildFuse();this.inputEl.addEventListener("keydown",function(e){switch(e.code){case"ArrowDown":_this.markActive(_this.getSelectedIndex()+1);break;case"ArrowUp":_this.markActive(_this.getSelectedIndex()-1);break;case"Enter":{var _document_querySelector;var url=(_document_querySelector=document.querySelector(".ins-selectable.active"))===null||_document_querySelector===void 0?void 0:_document_querySelector.dataset.url;if(url)_this.gotoLink(url);break}}});this.inputEl.addEventListener("input",function(){nextTick(function(){_this.search()})});nextTick(function(){_this.search()});this.inputEl.focus()}},{key:"getSelectedIndex",value:function getSelectedIndex(){var index=-1;document.querySelectorAll(".ins-selectable").forEach(function(elem,id){if(elem.classList.contains("active"))index=id});return index}},{key:"markActive",value:function markActive(index){var items=document.querySelectorAll(".ins-selectable");index=(index+Number(index===-2)+items.length)%items.length;items.forEach(function(elem,id){elem.classList.remove("active");if(id===index){elem.classList.add("active")}})}},{key:"gotoLink",value:function gotoLink(url){router.routeTo(url)}},{key:"makeSearchItem",value:function makeSearchItem(icon,title,slug,preview,url){var _this=this;var _this_config_translation;url=SiteStatic.url_for(url);return h("div",{class:"ins-selectable ins-search-item","data-url":url,onclick:function onclick(){_this.gotoLink(url)}},h("header",null,h("i",{class:"fa fa-".concat(icon)}),h("span",{class:"ins-title"},title!=null&&title!==""?title:(_this_config_translation=this.config.translation)===null||_this_config_translation===void 0?void 0:_this_config_translation.untitled),slug&&slug!==title?h("span",{class:"ins-slug"},slug):null),preview?h("p",{class:"ins-search-preview"},preview):null)}},{key:"makeSection",value:function makeSection(sectionType,array){var _this=this;var _this_config_translation;var sectionTitle=(_this_config_translation=this.config.translation)===null||_this_config_translation===void 0?void 0:_this_config_translation[sectionType];if(array.length===0)return null;var searchItems=array.map(function(item){var newItem={};var _iteratorNormalCompletion=true,_didIteratorError=false,_iteratorError=undefined;try{for(var _iterator=Object.entries(item)[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _step_value=_sliced_to_array(_step.value,2),key=_step_value[0],val=_step_value[1];if(key==="link"){newItem[key]=val;continue}newItem[key]=escapeHTML(val)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}var _ref;var matches=(_ref="matches"in item?item.matches:null)!==null&&_ref!==void 0?_ref:[];var _iteratorNormalCompletion1=true,_didIteratorError1=false,_iteratorError1=undefined;try{for(var _iterator1=matches[Symbol.iterator](),_step1;!(_iteratorNormalCompletion1=(_step1=_iterator1.next()).done);_iteratorNormalCompletion1=true){var matched=_step1.value;if(matched.key==="link")continue;if(matched.key==null)continue;var _matched_indices_reduce=_sliced_to_array(matched.indices.reduce(function(a,b){return a[1]-a[0]<b[1]-b[0]?b:a},[0,-1]),2),st=_matched_indices_reduce[0],ed=_matched_indices_reduce[1];newItem[matched.key]=escapeHTML(item[matched.key].slice(0,st))+"<mark>"+escapeHTML(item[matched.key].slice(st,ed+1))+"</mark>"+escapeHTML(item[matched.key].slice(ed+1));if(matched.key==="text"){newItem.text=newItem.text.slice(Math.max(st-20,0))}}}catch(err){_didIteratorError1=true;_iteratorError1=err}finally{try{if(!_iteratorNormalCompletion1&&_iterator1.return!=null){_iterator1.return()}}finally{if(_didIteratorError1){throw _iteratorError1}}}if(["posts","pages"].includes(sectionType)){return _this.makeSearchItem("file",newItem.title,null,newItem.text.slice(0,350),newItem.link)}if(["categories","tags"].includes(sectionType)){return _this.makeSearchItem(sectionType==="categories"?"folder":"tag",newItem.name,newItem.slug,null,newItem.link)}return null});return h("section",{class:"ins-section"},h("header",{class:"ins-section-header"},sectionTitle),searchItems)}},{key:"buildFuse",value:function buildFuse(){var _this=this;return _async_to_generator(function(){var data;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,_this.searchData.data()];case 1:data=_state.sent();Fuse.config.ignoreLocation=true;Fuse.config.includeMatches=true;_this.fuses.posts=new Fuse(data.posts,{keys:["title","text","link"]});_this.fuses.pages=new Fuse(data.pages,{keys:["title","text","link"]});_this.fuses.tags=new Fuse(data.tags,{keys:["name","slug","link"]});_this.fuses.categories=new Fuse(data.categories,{keys:["name","slug","link"]});_this.fuse_ok.value=true;return[2]}})})()}},{key:"getSearchResult",value:function getSearchResult(keyword){var _this=this;return _async_to_generator(function(){var data,searched;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,_this.fuse_ok.unitl(true)];case 1:_state.sent();return[4,_this.searchData.data()];case 2:data=_state.sent();searched=function searched(t){return keyword?_this.fuses[t].search(keyword,{limit:SEARCH_RESULT_LIMIT}).map(function(res){return _object_spread1({},res,res.item)}):data[t].slice(0,SEARCH_RESULT_LIMIT)};return[2,SEARCHABLE.map(function(s){return[s,searched(s)]})]}})})()}},{key:"search",value:function search(){var _this=this;var keyword=this.inputEl.value;this.getSearchResult(keyword).then(function(res){_this.containerEl.innerHTML="";var _iteratorNormalCompletion=true,_didIteratorError=false,_iteratorError=undefined;try{for(var _iterator=res[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _step_value=_sliced_to_array(_step.value,2),key=_step_value[0],result=_step_value[1];var section=_this.makeSection(key,result);if(section)_this.containerEl.appendChild(section)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}})}},{key:"selectItemByDiff",value:function selectItemByDiff(value){var items=this.containerEl.querySelectorAll(".ins-selectable");var prevPosition=-1;items.forEach(function(elem,index){if(elem.classList.contains("active")){elem.classList.remove("active");prevPosition=index;return}});var nextPosition=(items.length+prevPosition+value)%items.length;items[nextPosition].classList.add("active")}}]);return SoSimpleSearch}(Component);function getTheme(){var _document_querySelector_getAttribute;return(_document_querySelector_getAttribute=document.querySelector("html").getAttribute("theme"))!==null&&_document_querySelector_getAttribute!==void 0?_document_querySelector_getAttribute:"default"}function setTheme(){var theme=localStorage.getItem("theme");if(theme){document.querySelector("html").setAttribute("theme",theme)}}setTheme();function darkLightToggle(){var themeNow=getTheme();if(themeNow==="default"){themeNow=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"true"}if(themeNow==="dark"){localStorage.setItem("theme","light")}else{localStorage.setItem("theme","dark")}setTheme()}var SoSimple={searchInit:function searchInit(config){new SoSimpleSearch(config)},darkLightToggle:darkLightToggle};function _array_like_to_array(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_without_holes(arr){if(Array.isArray(arr))return _array_like_to_array(arr)}function _iterable_to_array(iter){if(typeof Symbol!=="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}function _non_iterable_spread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _to_consumable_array1(arr){return _array_without_holes(arr)||_iterable_to_array(arr)||_unsupported_iterable_to_array(arr)||_non_iterable_spread()}function _unsupported_iterable_to_array(o,minLen){if(!o)return;if(typeof o==="string")return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}var loadMermaid=function loadMermaid1(){import("https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs").then(function(param){var mermaid=param.default;console.log("mermaid loaded",mermaid);mermaid.initialize({suppressErrorRendering:false,securityLevel:"loose",startOnLoad:false});mermaid.run({nodes:document.querySelectorAll("pre code.hljs.language-mermaid")})});loadMermaid=function loadMermaid(){}};function makeLangName(lang,elem){if(lang==="mermaid"){loadMermaid()}else if(lang){var tag=document.createElement("aside");tag.classList.add("language-name");tag.textContent=lang;elem.prepend(tag)}}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("pre code.hljs").forEach(function(elem){elem.classList.forEach(function(name){var _name_match;var lang=(_name_match=name.match(/language-([\s\S]+)/))===null||_name_match===void 0?void 0:_name_match[1];makeLangName(lang,elem)})});document.querySelectorAll("figure.highlight").forEach(function(elem){var lang=_to_consumable_array1(elem.classList.values()).at(-1);makeLangName(lang,elem)})});window.addEventListener("beforeprint",function(){document.documentElement.style.setProperty("--page-url",JSON.stringify(window.location.href))});document.addEventListener("DOMContentLoaded",function(){document.head.appendChild(h("style",null,"@font-face {\n  font-family: 'mononoki';\n  src: url('/fonts/mononoki-regular.woff2') format('woff2');\n  font-weight: normal;\n  font-style: normal;\n}"))});window.SoSimple=SoSimple;window.Utils=Utils});
